<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mubarak Afolabi — Articles</title>
    <link href="css/style.css" rel="stylesheet" />

    <style>
        /* Existing styles from projects page for navbar and general layout */
        #site-navbar ul li img {
            width: 32px;
            height: 32px;
        }

        #site-navbar ul li a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: white;
            cursor: pointer;
        }

        .thin-line {
            height: 0.5px;
            background-color: rgba(255, 255, 255, 0.5);
        }

        /* Styles specific to articles for stacking effect */
        .article-item {
            position: sticky;
            top: 60px;
           
            z-index: 1;
            transition: opacity 0.3s ease-out;
            min-height: calc(100vh - 60px);
        }

        #articles-list {
            display: flex;
            flex-direction: column;
            /* Adjust this gap to control initial spacing between cards */
            gap: 1rem;
            /* Changed from 2rem to 1rem */
            /* Important for positioning context of sticky children */
            position: relative;
        }

        /* Style to prevent body scrolling when articles are stacking */
        body.no-scroll {
            overflow: hidden;
        }

        /* Ensure main content has proper flow */
        #articles-main {
            flex-1;
            /* Keep flex-1 as before */
            padding-top: 10px;
            /* Adjust padding if navbar overlaps content */
            padding-bottom: 0;
            /* Padding bottom will be added to body */
        }

        /* Specific styles for article cards */
        .article-card-wrapper {
            background-color: white;
            border: 1px solid white;
            border-radius: 20px;
            /* equivalent to rounded-2xl */
            padding: 1.5rem;
            /* equivalent to p-6 */
            display: flex;
            flex-direction: column;
            color: black;
            /* Default text color for the white card */
        }

        .article-card-title {
            background-color: #CDEDA2;
            /* Specific hex color as requested */
            color: black;
            /* Title text is black as requested */
            border: 1px solid black;
            padding: 0.75rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 600;
            /* semi-bold */
        }

        .article-card-date,
        .article-card-metadata {
            color: white;
            /* These texts are white as requested */
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            /* Add some padding to align with the title block visual */
            padding-right: 1rem;
        }

        .article-card-date {
            font-size: 0.875rem;
            /* text-sm */
            font-style: italic;
        }

        .article-card-metadata {
            font-size: 0.95rem;
            /* slightly larger than snippet */
            font-weight: 500;
            /* medium */
        }

        .article-card-snippet {
            color: black;
            /* Snippet text is black as it's on the white card */
            font-size: 0.95rem;
            /* text-sm */
            line-height: 1.5;
            margin-top: 0.75rem;
            /* Space between metadata and snippet */
            margin-bottom: 1rem;
        }
    </style>
</head>

<body class="bg-primary-background-dark text-text-light min-h-screen flex flex-col">

    <nav id="site-navbar"
        class="navbar sticky top-0 w-full border border-black backdrop-blur bg-primary-background-dark bg-opacity-50 transform transition-transform duration-500 -translate-y-full z-50">
        <ul class="flex justify-around items-center py-4">
            <li><a href="index.html" class="flex flex-col items-center"><img src="../assets/Vector.svg"
                        alt="Home Icon"><span>HOME</span></a></li>
            <li><a href="about.html" class="flex flex-col items-center"><img src="../assets/About Icon.svg"
                        alt="About Icon"><span>ABOUT</span></a></li>
            <li><a href="projects.html" class="flex flex-col items-center"><img src="../assets/Projects Icon.svg"
                        alt="Projects Icon"><span>PROJECTS</span></a></li>
            <li><a href="articles.html" class="flex flex-col items-center"><img src="../assets/Articles Icon.svg"
                        alt="Articles Icon"><span>ARTICLES</span></a></li>
            <li><a href="hireMe.html" class="flex flex-col items-center"><img src="../assets/HireMe Icon.svg"
                        alt="Hire Me Icon"><span>HIRE ME</span></a></li>
            <li id="dark-toggle" class="flex flex-col items-center cursor-pointer"><img
                    src="../assets/ToggleOff Icon.svg" alt="Toggle Dark Mode" id="dark-toggle-icon"><span>dark
                        mode</span></li>
        </ul>
    </nav>

    <main id="articles-main">
        <div class="container mx-auto px-4">

            <h2 class="text-xl font-bold pt-6 pl-4 text-text-light">Publications</h2>
            <div class="thin-line mt-3 mx-4"></div>

            <div id="articles-list" class="mt-4">

                <section class="article-item" data-article-id="ai-ethics">
                    <h3 class="article-card-title text-lg font-bold">The Ethical Implications of AI in Design</h3>
                    <p class="article-card-date">Published: May 15, 2025</p>
                    <p class="article-card-metadata">Author: Mubarak Afolabi | Category: AI, Ethics, Design</p>
                    <div class="article-card-wrapper">
                        <p class="article-card-snippet">
                            Exploring the critical ethical considerations designers face when integrating artificial
                            intelligence into their products and services. We delve into issues of bias, transparency,
                            and accountability.
                        </p>
                        <div class="w-full flex justify-center mt-auto">
                            <button class="btn-primary read-on-btn">Read On</button>
                        </div>
                    </div>
                </section>

                <section class="article-item" data-article-id="frontend-trends">
                    <h3 class="article-card-title text-lg font-bold">Frontend Frameworks: A Look at 2025 Trends</h3>
                    <p class="article-card-date">Published: April 28, 2025</p>
                    <p class="article-card-metadata">Author: Mubarak Afolabi | Category: Web Development, Frontend</p>
                    <div class="article-card-wrapper">
                        <p class="article-card-snippet">
                            A comprehensive overview of the most popular and emerging frontend frameworks in 2025,
                            discussing their strengths, weaknesses, and ideal use cases for modern web applications.
                        </p>
                        <div class="w-full flex justify-center mt-auto">
                            <button class="btn-primary read-on-btn">Read On</button>
                        </div>
                    </div>
                </section>

                <section class="article-item" data-article-id="ux-principles">
                    <h3 class="article-card-title text-lg font-bold">Mastering UX: Core Principles for Engaging
                        Interfaces</h3>
                    <p class="article-card-date">Published: March 10, 2025</p>
                    <p class="article-card-metadata">Author: Mubarak Afolabi | Category: UI/UX, Design</p>
                    <div class="article-card-wrapper">
                        <p class="article-card-snippet">
                            This article breaks down the fundamental principles of User Experience (UX) design,
                            offering practical tips and insights to create truly engaging and user-friendly digital
                            products.
                        </p>
                        <div class="w-full flex justify-center mt-auto">
                            <button class="btn-primary read-on-btn">Read On</button>
                        </div>
                    </div>
                </section>

            </div>
        </div>
    </main>

    <footer class="text-center text-text-muted bg-primary-background-dark py-4 z-40 mt-2">
        <span>© 2025 Mubarak Afolabi. All rights reserved.</span>
    </footer>

    <script>
        // === Navbar show/hide ===
        const nav = document.getElementById('site-navbar');
        let hideTimer;

        function showNavbar() {
            nav.classList.remove('-translate-y-full');
            clearTimeout(hideTimer);
            hideTimer = setTimeout(() => nav.classList.add('-translate-y-full'), 2500);
        }
        window.addEventListener('scroll', showNavbar);
        document.addEventListener('DOMContentLoaded', showNavbar);
        nav.addEventListener('mouseenter', showNavbar);
        nav.addEventListener('mouseleave', showNavbar);
        window.addEventListener('mousemove', e => {
            if (e.clientY < 50) showNavbar();
        });

        // === Dark mode toggle ===
        const toggleLi = document.getElementById('dark-toggle');
        const toggleIcon = document.getElementById('dark-toggle-icon');
        toggleLi.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            toggleIcon.src = isDark ? '../assets/ToggleOn Icon.svg' : '../assets/ToggleOff Icon.svg';
        });
        if (document.documentElement.classList.contains('dark')) toggleIcon.src = '../assets/ToggleOn Icon.svg';


        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.read-on-btn').forEach(btn => btn.addEventListener('click', e => {
                e.preventDefault();
                const articleItem = e.target.closest('.article-item');
                if (articleItem) {
                    const articleId = articleItem.dataset.articleId;
                    window.location.href = `articleDetail.html?id=${articleId}`;
                } else {
                    console.error("Could not find parent .article-item for the clicked button.");
                    window.location.href = 'articleDetail.html'; // Fallback
                }
            }));
        });

        // === Article Card Stack Scroll Animation ===
        document.addEventListener('DOMContentLoaded', () => {
            const articlesList = document.getElementById('articles-list');
            const articleItems = articlesList.querySelectorAll('.article-item');
            const body = document.body;

            if (articleItems.length === 0) return;

            const articlesMain = document.getElementById('articles-main');
            const articlesListTop = articlesList.offsetTop + articlesMain.offsetTop;


            let totalStackingHeight = 0;
            let firstCardHeight = 0;
            let cardGap = 0;

            const resizeObserver = new ResizeObserver(entries => {
                calculateStackingMetrics();
                onScroll();
            });


            function calculateStackingMetrics() {
                if (articleItems.length === 0) return;

                const computedStyle = window.getComputedStyle(articlesList);
                cardGap = parseFloat(computedStyle.getPropertyValue('gap'));
                if (isNaN(cardGap)) {
                    cardGap = 0;
                    console.warn("Could not determine CSS gap for #articles-list. Stacking height might be inaccurate.");
                }

                // Get the height of the first complete card (including title, metadata, and the white wrapper)
                firstCardHeight = articleItems[0].offsetHeight;
                let totalInitialHeight = 0;
                articleItems.forEach(item => {
                    totalInitialHeight += item.offsetHeight;
                });

                totalInitialHeight += (articleItems.length - 1) * cardGap;

                const viewportHeight = window.innerHeight;
                const extraScrollSpace = Math.max(0, viewportHeight - firstCardHeight);
                totalStackingHeight = totalInitialHeight - firstCardHeight + extraScrollSpace;

                body.style.paddingBottom = `${totalStackingHeight}px`;

                articleItems.forEach(item => {
                    resizeObserver.observe(item);
                });

                onScroll();
            }


            function onScroll() {
                const scrollY = window.scrollY;

                const animationZoneStart = articlesListTop;

                const animationZoneEnd = animationZoneStart + totalStackingHeight;

                const isAnimating = scrollY >= animationZoneStart && scrollY <= animationZoneEnd;

                if (isAnimating) {
                    body.classList.add('no-scroll');
                    window.scrollTo(0, clamp(scrollY, animationZoneStart, animationZoneEnd));
                } else {
                    body.classList.remove('no-scroll');
                }

                const animationProgress = clamp((scrollY - animationZoneStart) / totalStackingHeight, 0, 1);


                articleItems.forEach((currentItem, index) => {
                    if (index === 0) {
                        currentItem.style.zIndex = 100;
                        currentItem.style.opacity = 1;
                        return;
                    }

                    const previousItem = articleItems[index - 1];


                    const itemStackingStartScroll = initialOffsets[index - 1] || articlesListTop;
                    const itemStackingEndScroll = initialOffsets[index];

                    const itemProgress = clamp((scrollY - itemStackingStartScroll) / (itemStackingEndScroll - itemStackingStartScroll), 0, 1);

                    currentItem.style.zIndex = 10 + index;

                    if (index > 0) {
                        previousItem.style.opacity = `${1 - itemProgress}`;

                        if (scrollY > itemStackingEndScroll) {
                            previousItem.style.opacity = 0;
                        } else if (scrollY < itemStackingStartScroll) {
                            previousItem.style.opacity = 1;
                        }
                    }


                });

                if (scrollY > animationZoneEnd) {
                    articleItems.forEach((item, index) => {
                        item.style.zIndex = 10 + index;
                    });
                }


                if (scrollY >= animationZoneEnd) {
                    body.classList.remove('no-scroll');
                    body.style.paddingBottom = '0';
                } else if (scrollY < animationZoneStart) {

                    body.classList.remove('no-scroll');
                    body.style.paddingBottom = `${totalStackingHeight}px`;
                }

            }


            function clamp(x, min, max) {
                return Math.min(Math.max(x, min), max);
            }


            let initialOffsets = [];
            function calculateInitialOffsets() {
                initialOffsets = Array.from(articleItems).map(item => item.offsetTop);
            }


            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => {
                    calculateInitialOffsets();
                    calculateStackingMetrics();
                }, 100);
            });

            window.addEventListener('resize', () => {
                calculateInitialOffsets();
                calculateStackingMetrics();
            });

            window.addEventListener('scroll', onScroll);


        });
    </script>

</body>

</html>